if(mediaWiki.config.get('wgCanonicalSpecialPageName')==='Wantedfiles'||mediaWiki.config.get('wgNamespaceIds').file===mediaWiki.config.get('wgNamespaceNumber')){mediaWiki.loader.using('mediawiki.util',function(){"use strict";function fixUploadLinks(){var $=jQuery,mw=mediaWiki,decodeURI=window.decodeURIComponent,upload=mw.util.wikiGetlink('Special:Upload')+'?wpDestFile=';function fixFileLink(link,name,title,text){link.href=upload+name;link.title=title+' '+decodeURI(name).replace(/_/g,' ');if(text){var $link=$(link);$link.contents().filter(function(){return this.nodeType===3;}).remove();$link.append(' '+text);}}if(mw.config.get('wgCanonicalSpecialPageName')==='Wantedfiles'){var indexPhp=mw.config.get('wgScript')+'',articleParts=(mw.config.get('wgArticlePath')+'').split('$1');$('ol.special a.new').not('[href*="wpDestFile="]').each(function(){var href=this.href+'',index=href.indexOf(articleParts[0]),lastIndex=href.lastIndexOf(articleParts[1]),name,match;if(index!==-1&&lastIndex!==-1){name=
href.substring(index+articleParts[0].length,lastIndex);match=(/^[^:]*:([^\?&]+)/).exec(name);name=match&&match[1];}else{index=href.indexOf(indexPhp);if(index!==-1){index+=indexPhp.length;match=(/(?:^\?|&)title=[^:]*:([^&]+)/).exec(href.substr(index));name=match&&match[1];}}if(name){fixFileLink(this,name,mw.msg('destfilename'));}});}else if(document.getElementById('mw-imagepage-nofile')){var filePage=mw.util.wikiUrlencode(mw.config.get('wgTitle'));$('a[data-id="edit"][href*="action=edit"], #ca-edit > a').each(function(){fixFileLink(this,filePage,mw.msg('destfilename'),mw.msg('upload'));});}}(function($,mw){var needs=['upload','destfilename'];var i=needs.length;while(i--){if(mw.messages.exists(needs[i])){needs.splice(i,1);}}if(needs.length===0){return $.Deferred().resolve();}return $.ajax({url:mw.util.wikiScript('api'),data:{action:'query',format:'json',meta:'allmessages',ammessages:needs.join('|')},dataType:'json'}).done(function(json){json=json&&json.query;json=json&&json.allmessages;
if(!$.isArray(json)){return;}for(var i=0,len=json.length;i<len;++i){if(json[i].missing!==void 0){continue;}mw.messages.set(json[i].name,json[i]['*']);}});})(jQuery,mediaWiki).done(function(){jQuery(fixUploadLinks);});});};;(function(window,$,mw,Wikia){'use strict';var config=mw.config.get(['stylepath','wgAction','wgCanonicalSpecialPageName','wgPageName','wgUserLanguage']),ajaxIndicator=window.ajaxIndicator||config.stylepath+'/common/images/ajax.gif',ajaxTimer,ajRefresh=window.ajaxRefresh||60000,ajPages=window.ajaxPages||[],ajSpecialPages=window.ajaxSpecialPages||['Recentchanges'],disallowActions=['delete','edit','protect','revisiondelete'],href=location.href.replace(/#[\S]*/,''),i18n;function getMessage(msgKey,globalKey){if(globalKey&&typeof window[globalKey]==='string'){return window[globalKey];}return i18n.msg('ajaxrc-'+msgKey).plain();}function storage(setTo){if(localStorage.getItem('AjaxRC-refresh')===null){localStorage.setItem('AjaxRC-refresh',true);}if(setTo===true||setTo===false
){localStorage.setItem('AjaxRC-refresh',setTo);}return JSON.parse(localStorage.getItem('AjaxRC-refresh'));}function getAppTo(){var $ret;$ret=$('.firstHeading');if($ret.length){return $ret;}$ret=$('.WikiaPage .page-header__main');if($ret.length){return $ret;}return false;}function loadPageData(){var $temp=$('<div>');$temp.load(href+' #mw-content-text',function(){var $newContent=$temp.children('#mw-content-text');if($newContent.length){$('#mw-content-text').replaceWith($newContent);mw.util.$content=$newContent;}ajaxTimer=setTimeout(loadPageData,ajRefresh);});$temp.remove();}function toggleAjaxReload(){if($('#ajaxToggle').prop('checked')){storage(true);loadPageData();}else{storage(false);clearTimeout(ajaxTimer);}}function preloadAJAXRL(){var $appTo=getAppTo(),$checkbox=$('<span>').attr('id','ajaxRefresh').css({'font-size':'xx-small','line-height':'100%','margin-left':'5px'}).append($('<label>').attr({id:'ajaxToggleText','for':'ajaxToggle',title:getMessage('refresh-hover',
'AjaxRCRefreshHoverText')}).text(getMessage('refresh-text','AjaxRCRefreshText')+':').css({'border-bottom':'1px dotted',cursor:'help'}),$('<input>').attr({id:'ajaxToggle',type:'checkbox'}).css('margin-bottom',0),$('<span>').attr('id','ajaxLoadProgress').css('display','none').append($('<img>').attr({alt:getMessage('load-status-alt',false),src:ajaxIndicator}).css({'vertical-align':'baseline',float:'none',border:0}))),$throbber;if($appTo===false){$('#WikiaArticle').prepend($checkbox);}else{$appTo.append($checkbox);}$throbber=$checkbox.find('#ajaxLoadProgress');$(document).ajaxSend(function(_,_2,settings){if(href===settings.url){$throbber.show();}}).ajaxComplete(function(_,_2,settings){var $collapsibleElements=$('#mw-content-text').find('.mw-collapsible'),ajCallAgain=window.ajaxCallAgain||[],i;if(href===settings.url){$throbber.hide();if($collapsibleElements.length){$collapsibleElements.makeCollapsible();}if(config.wgCanonicalSpecialPageName==='Recentchanges'){mw.special.recentchanges.init()
;if($('.mw-recentchanges-table').find('.WikiaDropdown').length){Wikia.RecentChanges.init();}}if(config.wgCanonicalSpecialPageName==='WikiActivity'){window.WikiActivity.init();}for(i=0;i<ajCallAgain.length;i++){if($.isFunction(ajCallAgain[i])){ajCallAgain[i]();}else{console.log('AjaxRC Error: Could not call non-function after reload.');}}mw.hook('wikipage.content').fire($('#mw-content-text'));}});$('#ajaxToggle').attr('checked',storage()).click(toggleAjaxReload);if(storage()){ajaxTimer=setTimeout(loadPageData,ajRefresh);}}function loadMessages(){mw.hook('dev.i18n').add(function(i18no){i18no.loadMessages('AjaxRC').done(function(i18nd){i18n=i18nd;preloadAJAXRL();});});importArticle({type:'script',article:'u:dev:MediaWiki:I18n-js/code.js'});}$(function(){if(!window.AjaxRCLoaded&&(ajPages.indexOf(config.wgPageName)>-1||ajSpecialPages.indexOf(config.wgCanonicalSpecialPageName)>-1)&&!$('#ajaxToggle').length&&disallowActions.indexOf(config.wgAction)===-1){window.AjaxRCLoaded=!0;if($(
'#mw-content-text .mw-collapsible').exists()){mw.loader.using('jquery.makeCollapsible',loadMessages);}else{loadMessages();}}});}(this,jQuery,mediaWiki,Wikia));;(function($){'use strict';var config=mw.config.get(['stylepath','wgAction','wgArticleId','wgNamespaceNumber','wgPageName','wgTitle']);if(window.ArchiveToolLoaded||(config.wgNamespaceNumber%2===0||config.wgNamespaceNumber===-1)&&config.wgNamespaceNumber!==110||config.wgAction!=='view'&&config.wgAction!=='purge'){return;}window.ArchiveToolLoaded=!0;var ArchiveTool={config:$.extend(true,{archiveListTemplate:window.archiveListTemplate||'ArchiveList',archivePageTemplate:window.archivePageTemplate||'ArchivePage',archiveSubpage:'Archive',userLang:!0},window.ArchiveToolConfig),hook:function(i18n){$.when(i18n.loadMessages('ArchiveTool'),mw.loader.using('mediawiki.api')).then($.proxy(this.init,this));},init:function(i18n){this.i18n=i18n;if(!this.config.userLang){i18n.useContentLang();}this.api=new mw.Api();var controls=($(
'#WikiaUserPagesHeader').length?'.UserProfileActionButton':'#PageHeader')+' .wds-dropdown__content > ul';if(config.wgNamespaceNumber===3){controls=($('#WikiaUserPagesHeader').length?'.UserProfileActionButton':'#WikiaPageHeader')+' > .wikia-menu-button > ul';}$('<li>',{id:'control_archive',click:$.proxy(this.click,this)}).append($('<a>',{id:'ca-archive',rel:'nofollow',text:i18n.msg('button').plain()})).appendTo(controls);},click:function(){this.regex=new RegExp('\\{\\{'+$.escapeRE(this.config.archiveListTemplate)+'\\}\\}');this.$container=$('#WikiaArticle').addClass('archiving').empty();this.$loading=$('<img>',{'alt':this.i18n.msg('loading').plain(),'class':'ajax','src':config.stylepath+'/common/progress-wheel.gif'}).appendTo(this.$container);this.api.get({action:'query',prop:'revisions',titles:config.wgPageName,rvprop:'timestamp|content'}).done($.proxy(this.cbRevisions,this));},cbRevisions:function(q){this.$loading.hide();var lines=q.query.pages[config.wgArticleId].revisions[0]['*'].
split('\n'),$table=$('<table>',{mousedown:$.proxy(this.tableClick,this),mouseup:$.proxy(this.tableUnclick,this)}).append($('<thead>').append($('<tr>').append($('<th>',{text:this.i18n.msg('lines').plain()}),$('<th>',{title:this.i18n.msg('sections').plain(),text:'{…}'})))).appendTo(this.$container),$body=$('<tbody>').appendTo($table),sections=[];lines.forEach(function(line,i){$body.append($('<tr>',{'class':this.regex.test(line)?'noarchive':'','line':line}).append($('<td>',{'class':'line','text':line}).append('&nbsp;')));if(i===0||/^=.+?=/.test(line)){if(i!==0){var last=sections[sections.length-1];last.end=i-1;last.length=i-last.start;}sections.push({start:i});}},this);var last=sections[sections.length-1];last.end=lines.length-1;last.length=lines.length-last.start;sections.forEach(function(section){var tr=$body.children().eq(section.start);$('<td>',{'class':'section','rowspan':section.length}).appendTo(tr);});this.$body=$body;$('<div>',{'class':'buttons'}).append($('<a>',{'class':
'wikia-button secondary','click':$.proxy(this.clickSelect,this),'text':this.i18n.msg('select').plain()}),' ',$('<a>',{'class':'wikia-button secondary','click':$.proxy(this.clickDeselect,this),'text':this.i18n.msg('deselect').plain()}),' ',$('<a>',{'class':'wikia-button','click':$.proxy(this.archive,this),'text':this.i18n.msg('save').plain()}),' ',$('<a>',{'class':'wikia-button','click':$.proxy(this.clickAbort,this),'text':this.i18n.msg('abort').plain()})).prependTo(this.$container).clone(true).appendTo(this.$container);this.clicked=!1;$('body').mouseup($.proxy(this.bodyUnclick,this));},clickAbort:function(){this.$loading.hide();location.href=mw.util.getUrl(config.wgPageName,{action:'purge'});},clickSelect:function(e){e.preventDefault();this.$body.children('tr').addClass('archive');},clickDeselect:function(e){e.preventDefault();this.$body.children('tr').removeClass('archive');},tableClick:function(e){e.preventDefault();var $li=$(e.target).closest('tr');if(!$li.length){return;}var
$section=$(e.target).closest('.section');if($section.length){var slist=$li.nextAll(':lt('+(parseInt($section.attr('rowspan'),10)-1)+')').andSelf();slist.toggleClass('archive',Boolean(slist.filter(function(){return!$(this).hasClass('archive');}).length));return;}this.clicked=!0;this.add=!$li.hasClass('archive');$li.toggleClass('archive',Boolean(this.add));},tableUnclick:function(e){if(!this.clicked){return;}var $li=$(e.target).closest('tr');if(!$li.length){return;}$li.toggleClass('archive',Boolean(this.add));},bodyUnclick:function(){this.clicked=!1;},archive:function(){var talkLines=[];var archiveLines=[];this.$body.children().each(function(){var $this=$(this),arr=$this.hasClass('noarchive')||!$this.hasClass('archive')?talkLines:archiveLines;arr.push($this.attr('line'));});if(!this.regex.test(talkLines[0])){talkLines=['{{'+this.config.archiveListTemplate+'}}',''].concat(talkLines);}archiveLines=['{{'+this.config.archivePageTemplate+'}}',''].concat(archiveLines);this.$container.
empty();this.$loading.show();this.talkContent=talkLines.join('\n');this.archiveContent=archiveLines.join('\n');this.run();},run:function(){this.archiveNo=1;this.$m=$('<p>',{text:this.i18n.msg('finding').plain()}).appendTo(this.$container);this.api.get({action:'query',list:'allpages',apnamespace:config.wgNamespaceNumber,apprefix:config.wgTitle+'/'+this.config.archiveSubpage,aplimit:'max',apdir:'ascending'}).done($.proxy(this.cbRun,this));},cbRun:function(q){$.each(q.query.allpages,$.proxy(function(_,value){var qt=parseInt(value.title.substr(config.wgPageName.length+('/'+this.config.archiveSubpage).length),10);if(qt>=this.archiveNo){this.archiveNo=qt+1;}},this));this.archiveTitle=config.wgPageName+'/'+this.config.archiveSubpage+' '+this.archiveNo;this.$m.append(this.i18n.msg('done-using',this.archiveNo).escape());this.saveArchive();},saveArchive:function(){this.$m=$('<p>',{text:this.i18n.msg('saving').plain()}).appendTo(this.$container);this.api.post({action:'edit',title:this.
archiveTitle,text:this.archiveContent,token:mw.user.tokens.get('editToken'),summary:this.i18n.inContentLang().msg('summary-from',config.wgPageName).plain(),minor:!0,createonly:!0}).done($.proxy(this.cbSaveArchive,this));},cbSaveArchive:function(q){if(q.error&&q.error.code==='articleexists'){this.$m.append(this.i18n.msg('failed').escape());this.$container.append($('<p>',{text:this.i18n.msg('exists').plain()}));return this.abort();}this.$m.append(this.i18n.msg('done').escape());this.saveTalk();},saveTalk:function(){this.$m=$('<p>',{text:this.i18n.msg('updating').plain()}).appendTo(this.$container);this.api.post({action:'edit',title:config.wgPageName,text:this.talkContent,token:mw.user.tokens.get('editToken'),summary:this.i18n.inContentLang().msg('summary-to',this.archiveTitle).plain(),minor:!0}).done($.proxy(this.cbSaveTalk,this));},cbSaveTalk:function(q){if(q.edit.result==='Success'){this.$m.append(this.i18n.msg('done').escape());this.$loading.hide();location.href=mw.util.getUrl(
config.wgPageName,{action:'purge'});}else{this.$m.append(this.i18n.msg('failed').escape());this.$container.append($('<p>',{text:this.i18n.msg('failed-delete').plain()}));this.abort();}},abort:function(){console.log(this);this.$loading.hide();this.$container.append($('<p>',{text:this.i18n.msg('aborting').plain()}),$('<p>',{html:this.i18n.msg('refresh',config.wgPageName).parse()}));}};mw.hook('dev.i18n').add($.proxy(ArchiveTool.hook,ArchiveTool));importArticles({type:'script',article:'u:dev:MediaWiki:I18n-js/code.js'},{type:'style',article:'u:dev:MediaWiki:ArchiveTool.css'});})(jQuery);;Date.parseISO8601=function(text){"use strict";var when=(/^(\d{4})-?(\d\d)-?(\d\d)[T\s](\d\d):?(\d\d):?(\d\d)(?:\.?(\d+))?(?:Z|\+00(?::?00)?)$/).exec(text);if(!when){return NaN;}return+new Date(when[1],when[2]-1,when[3],when[4],when[5],when[6],('.'+when[7])*1000|0);};(function(window,$,mw,config){"use strict";var loaderData=(function($,mw){var siteSkin=mw.config.get('skin');if(({oasis:1,wikia:1})[siteSkin]
===1){siteSkin='oasis';}else if(({wowwiki:1,uncyclopedia:1,monobook:1,vector:1})[siteSkin]===1){siteSkin='monobook';}else{if(window.console){window.console.log('USERTAGS(Loader): Unsupported skin:',siteSkin);}return;}var username=mw.config.get('wgTitle'),namespace=mw.config.get('wgNamespaceNumber')|0;if(siteSkin==='oasis'){if(({'-1':1,2:1,3:1,500:1,1200:1})[namespace]!==1){return;}if(mw.config.get('wgAction')==='edit'&&namespace!==1200){return;}if(({1200:1,500:1,2:1,3:1})[namespace]===1&&username.indexOf('/')!==-1){return;}if(namespace===-1){username=null;namespace=mw.config.get('wgCanonicalSpecialPageName');if(namespace==='Contributions'){username=window.location.pathname;namespace=window.decodeURIComponent(username.substr(username.lastIndexOf('/')+1));namespace=(namespace!==mw.config.get('wgPageName')&&namespace);username=(/(?:^\?|&)target=([^&]*)/).exec(window.location.search);username=(username&&window.decodeURIComponent(username[1]));username=username||namespace;username=(username
&&username.replace(/_/g,' '));}else if(namespace!=='Following'){return;}username=username||mw.config.get('wgUserName');}}else{if(({2:1,3:1,1200:1})[namespace]!==1){return;}username=username.match(/^[^\/]+/)[0];}if(mw.util.isIPv4Address(username)||mw.util.isIPv6Address(username)){return;}return{skin:siteSkin,user:username};})($,mw);config=($.isPlainObject(config)&&config)||{};if(loaderData){window.UserTagsJS=config;config.loader=loaderData;if((/(?:^\?|&)debugusertags=1(?:&|$)/i).test(window.location.search)){config.debug=!0;}config.modules=($.isPlainObject(config.modules)&&config.modules)||{};if($.isEmptyObject(config.modules)){config.modules={inactive:!0,newuser:!0,autoconfirmed:!0,mwGroups:!0,metafilter:{sysop:['bureaucrat','founder'],bureaucrat:['founder'],chatmoderator:['sysop','bureaucrat']}};}config.modules.stopblocked=config.modules.stopblocked||config.modules.stopblocked===void 0;config.modules.isblocked=config.modules.isblocked||(config.modules.isblocked===void 0&&
loaderData.skin==='monobook');config.modules.i18n=!0;}var importList=(function(config,alwaysOnly){var moduleMap={explode:{s:'u:dev:MediaWiki:UserTags/module.implode.js'}};var list=[],hash={},exts=config.extensions||{},script,data,module;for(module in config.modules){if(exts[module]!==void 0){continue;}if(moduleMap.hasOwnProperty(module)){data=moduleMap[module];if(alwaysOnly&&!data.always){continue;}script=data.s;}else if(!alwaysOnly){script='u:dev:MediaWiki:UserTags/module.'+module+'.js';}else{continue;}if(hash[script]!==1){hash[script]=1;list[list.length]=script;}}list.sort();if(!alwaysOnly){list[list.length]='u:dev:MediaWiki:UserTags/core.js';}return list;})(config,!loaderData);if(!importList.length){window.UserTagsJS=null;try{delete window.UserTagsJS;}catch(e){}return;}if(!loaderData){window.UserTagsJS=config={};}config.extensions=($.isPlainObject(config.extensions)&&config.extensions)||{};var coreDeps=['mediawiki.util'];mw.loader.load(coreDeps,null,true);if(config.debug!==
'noload'){mw.loader.using(coreDeps,function(){window.importArticles({type:'script',articles:importList});});}else{config.imports=importList;}})(window,jQuery,mediaWiki,window.UserTagsJS);;(function(){if(window.PurgeButtonLoaded){return;}window.PurgeButtonLoaded=!0;function callback(){location.reload(true);}function click(){$(this).html($('<img>',{src:'https://images.wikia.nocookie.net/dev/images/4/42/Loading.gif'}));$.get(new mw.Uri().extend({action:'purge'}),callback);}function init(text){$(['.UserProfileActionButton .wikia-menu-button .WikiaMenuElement','.page-header__contribution-buttons .wds-list'].join(',')).first().append($('<li>').append($('<a>',{id:'ca-purge',click:click,href:'#',text:text})));}function hook2(i18n){init(i18n.msg('purge').plain());}function hook1(i18no){i18no.loadMessages('PurgeButton').then(hook2);}if(typeof window.PurgeButtonText==='string'){init(window.PurgeButtonText);}else{importArticle({type:'script',article:'u:dev:MediaWiki:I18n-js/code.js'});mw.hook(
'dev.i18n').add(hook1);}})();;(function($,mw,window,undefined){"use strict";var baseURL,url,urlParameters,query,displayParameters,pathRegex,$container,$aifrom,$aito,$ascending,$descending,$aiprefix,$aiminsize,$aimaxsize,$ailimit,$query;function getApproxSize(num){if(num<1024){return(num+' B');}num=num/1024;if(num<1024){return((Math.round(num*100)/100)+' KB');}num=num/1024;return((Math.round(num*100)/100)+' MB');}function setURL(){url=baseURL;for(var p in urlParameters){url+='&'+p+'='+urlParameters[p];}var link='<a id="qo-url" href="'+url+'">'+url+'</a>';$('#qo-url').replaceWith(link);}function apiCall(data){try{query=data.query&&data.query.allimages;if(!Array.isArray(query)){query=[];}var length=query.length;if(length!==0){var lastFilename=query[length-1].name;}rebuildResults();window.setTimeout(function(){if(length!==0){$('#qo-aifrom').val(lastFilename);urlParameters.aifrom=lastFilename;setURL();}$('#qo-query').removeAttr('disabled');},2000);}catch(e){window.console.log(
'Unhandled exception in apiCall():',e);$('#qo-query').removeAttr('disabled');window.alert(e);}}function sortQueryByProperty(property,direction){query.sort(function(a,b){if(a[property]===b[property]){return 0;}else if(a[property]<b[property]){return direction;}else{return direction*-1;}});}function escape(input){return mw.html.escape(String(input));}function rebuildResults(){try{var message;if(query.length===0){message='There are no API query results available for display.';}else if(query.length===1){message='Currently displaying 1 result returned from API query.';}else{message='Currently displaying '+query.length+' results returned from API query.';}var div='<div id="results-counter">'+message+'</div>';$('#results-counter').remove();$('#d-table').after(div);sortQueryByProperty(displayParameters.sortingProperty,displayParameters.sortingDirection);if(displayParameters.rawtext){rebuildDisplayTextarea();}else{rebuildDisplayTable();}}catch(e){window.console.log(
'Unhandled exception in rebuildResults():',e);window.alert(e);}}function rebuildDisplayTable(){var sortingTable='<table id="s-table" class="wikitable"><tbody>',sortingRows=[],filenameJoiner='">',length=query.length,i;if(displayParameters.filensprefix){filenameJoiner+='File:';}i=-1;while(++i<length){sortingRows[i]='<tr><td><a class="s-table-filename-a" data-url="'+escape(query[i].url)+'" href="'+escape(query[i].descriptionurl)+filenameJoiner+escape(query[i].name)+'</a></td>';}sortingRows[length]='<tr><th>Filename</th>';if(displayParameters.timestamp){i=-1;while(++i<length){sortingRows[i]+='<td>'+escape(query[i].timestamp)+'</td>';}sortingRows[length]+='<th>Timestamp</th>';}if(displayParameters.user){i=-1;while(++i<length){sortingRows[i]+='<td><a href="'+mw.util.getUrl('Special:ListFiles/'+query[i].user)+'" title="Show all images uploaded by this user">'+escape(query[i].user)+'</a></td>';}sortingRows[length]+='<th>Uploader</th>';}if(displayParameters.mime){i=-1;while(++i<length){
sortingRows[i]+='<td>'+escape(query[i].mime)+'</td>';}sortingRows[length]+='<th>MIME type</th>';}if(displayParameters.size){i=-1;if(displayParameters.approxsize){while(++i<length){sortingRows[i]+='<td>'+escape(getApproxSize(query[i].size))+'</td>';}}else{while(++i<length){sortingRows[i]+='<td>'+escape(query[i].size)+'</td>';}}sortingRows[length]+='<th>Size (bytes)</th>';}if(displayParameters.width){i=-1;while(++i<length){sortingRows[i]+='<td>'+escape(query[i].width)+'</td>';}sortingRows[length]+='<th>Width (px)</th>';}if(displayParameters.height){i=-1;while(++i<length){sortingRows[i]+='<td>'+escape(query[i].height)+'</td>';}sortingRows[length]+='<th>Height (px)</th>';}i=-1;sortingTable+=sortingRows[length]+'</tr>';while(++i<length){sortingTable+=sortingRows[i]+'</tr>';}sortingTable+='</tbody></table>';$('#s-table, #s-textarea').remove();$('#results-counter').after(sortingTable);$('.s-table-filename-a').parent().mouseover(function(){var $a=$(this).children('a'),url=$a.attr('data-url');
var preview='<img id="s-image-hover-preview" src="'+url+'"/>';$(document.body).append(preview);$container.css('opacity','.75');}).mouseout(function(){$container.css('opacity','1');$('#s-image-hover-preview').remove();});}function rebuildDisplayTextarea(){var separator=displayParameters.rawtextSeparator;var $textarea=$('<textarea id="s-textarea" wrap="off"></textarea>');var str='';for(var i=0,len=query.length;i<len;i++){var q=query[i];if(displayParameters.filensprefix){str+=('File:'+q.name);}else{str+=q.name;}if(displayParameters.timestamp){str+=(separator+q.timestamp);}if(displayParameters.user){str+=(separator+q.user);}if(displayParameters.mime){str+=(separator+q.mime);}if(displayParameters.size){if(displayParameters.approxsize){str+=(separator+getApproxSize(q.size));}else{str+=(separator+q.size);}}if(displayParameters.width){str+=(separator+q.width);}if(displayParameters.height){str+=(separator+q.height);}str+='\n';}$textarea.css('height',(((query.length+2)*10)+'px')).val(str);$(
'#s-table, #s-textarea').remove();$('#results-counter').after($textarea);}function initListFilesForm(){$container=$('#ListFiles-container');if($container.length===0){var index=mw.config.get('wgPageName').indexOf('ListFiles');var wgNamespaceNumber=mw.config.get('wgNamespaceNumber');if((index!==-1)&&(wgNamespaceNumber===2||wgNamespaceNumber===4)){$container=$('#mw-content-text');}else{return;}}$('#ListFiles-stylesheet').remove();$container.children().remove();$container.text('');var qostyle='#settings-save,#settings-reset{margin-left:100px;}#settings-save a, #settings-reset a{cursor:pointer;}#qo-table{width:100%;margin-top:30px;}#qo-table input[type="text"],#qo-table div{width:99%;}#qo-table label{font-family:monospace;}#qo-title{font-size:150%;}#qo-table td{padding:5px;width:33%;}#qo-descending{margin-left:10px;}#qo-query{float:right;}#qo-inner-table td{border:0;}';var dstyle=
'#d-table{width:100%;margin-top:30px;}#d-title{font-size:150%;}#d-table td{padding:5px 5px 5px 25px;}.margin-left-20,.d-radio,#d-sorting-property{margin-left:20px;}';var sstyle='#results-counter{margin-top:30px;width:100%;text-align:center;font-weight:bold;}#s-table{table-layout:fixed;width:100%;margin-top:30px;word-wrap:break-word;}#s-textarea{width:99%;margin-top:30px;white-space:nowrap;overflow-x:auto;overflow-y:auto;}#s-image-hover-preview{background-color:black;border-radius:10px;border:5px solid black;left:35%;opacity:1;padding:1px;position:fixed;top:10%;width:30%;z-index:2000000;}';$(document.head).append(('<style id="ListFiles-stylesheet">'+'#WikiaMainContent{width:1010px;}.WikiaRail{display:none;}'+qostyle+dstyle+sstyle+'</style>'));query=[];baseURL=mw.util.wikiScript('api')+'?action=query&list=allimages';initURLandDisplayParams();var devInfo='<div id="script-dev-div"><a href="https://dev.wikia.com/wiki/ListFiles" '+'title="Read about this script">w:c:dev:ListFiles</a>';if(
window.localStorage){devInfo+=('<span id="settings-save">[<a title="Saves your settings to local storage">Save current settings</a>]</span>'+'<span id="settings-reset">[<a title="Resets all settings back to their default values">Reset to default settings</a>]</span>');}devInfo+='</div>';var queryOptions='<table id="qo-table" class="wikitable" data-expandtext="Show" data-collapsetext="Hide"><tbody>'+'<tr><th colspan="3"><span id="qo-title">Query Options</span></th></tr>'+'<tr><td><label>aifrom</label> - start file enumeration at (alphabetic)'+'<input id="qo-aifrom" type="text" placeholder="Filename1.png" /></td>'+'<td><label>aito</label> - end file enumeration at (alphabetic)'+'<input id="qo-aito" type="text" placeholder="Filename2.jpg" /></td>'+'<td><label>aidir</label> - direction to enumerate (alphabetic)<div>'+'<label><input id="qo-ascending" type="radio" />ascending</label>'+'<label><input id="qo-descending" type="radio" />descending</label>'+
'</div></td></tr><tr><td><label>aiprefix</label> - restrict search to files with prefix'+'<input id="qo-aiprefix" type="text" placeholder="prefix" /></td>'+'<td colspan="2" style="padding:0;"><table id="qo-inner-table"><tr><td>'+'<label>aiminsize</label> - minimum file size'+'<input id="qo-aiminsize" type="text" placeholder="number (bytes)" /></td><td>'+'<label>aimaxsize</label> - maximum file size'+'<input id="qo-aimaxsize" type="text" placeholder="number (bytes)" /></td><td>'+'<label>ailimit</label> - max number of files<br /><select id="qo-ailimit">'+'<option value="50">50</option><option value="100">100</option><option value="250">250</option>'+'<option value="500">500 (user max)</option><option value="1000">1000</option><option value="2500">2500</option>'+'<option value="5000">5000 (bot max)</option></select></td></tr></table></td></tr>'+'<tr><td colspan="3"><div><a id="qo-url"></a><button id="qo-query">Query</button></div></td></tr>'+'</tbody></table>';var displayOptions=
'<table id="d-table" class="wikitable" data-expandtext="Show" data-collapsetext="Hide"><tbody>'+'<tr><th colspan="3"><span id="d-title">Display Options</span></th></tr>'+'<tr><td>File information to display</td><td colspan="2">'+'<label><input dparam="timestamp" class="d-checkbox" type="checkbox" />Timestamp</label>'+'<label><input dparam="user" class="d-checkbox margin-left-20" type="checkbox" />Uploader</label>'+'<label><input dparam="mime" class="d-checkbox margin-left-20" type="checkbox" />MIME type</label>'+'<label><input dparam="size" class="d-checkbox margin-left-20" type="checkbox" />File size</label>'+'<label><input dparam="width" class="d-checkbox margin-left-20" type="checkbox" />Width</label>'+'<label><input dparam="height" class="d-checkbox margin-left-20" type="checkbox" />Height</label></td></tr>'+'<tr><td>Sorting Algorithm</td><td>Sorting direction:'+'<label><input id="d-ascending" class="d-radio" type="radio" />Ascending</label>'+
'<label><input id="d-descending" class="d-radio" type="radio" />Descending</label></td>'+'<td>Sorting property:'+'<select id="d-sorting-property"><option value="name">Filename</option><option value="timestamp">Timestamp</option>'+'<option value="user">Uploader</option><option value="mime">MIME type</option>'+'<option value="size">Size</option><option value="width">Width</option><option value="height">Height</option>'+'</select></td></tr><tr><td colspan="3">'+'<label><input dparam="rawtext" class="d-checkbox" type="checkbox" />Display results as raw text</label>'+'<label><input dparam="filensprefix" class="d-checkbox margin-left-20" type="checkbox" />Show File: prefix for filenames</label>'+'<label><input dparam="approxsize" class="d-checkbox margin-left-20" type="checkbox" />Show file size in KB or MB</label>'+'</td></tr></tbody></table>';$container.append(devInfo+queryOptions+displayOptions);$aifrom=$('#qo-aifrom');$aito=$('#qo-aito');$ascending=$('#qo-ascending');$descending=$(
'#qo-descending');$aiprefix=$('#qo-aiprefix');$aiminsize=$('#qo-aiminsize');$aimaxsize=$('#qo-aimaxsize');$ailimit=$('#qo-ailimit');$query=$('#qo-query');initSavedFormState();rebuildResults();initQueryEvents();initDisplayEvents();}function initURLandDisplayParams(purgeLocalStorage){var u,d;if(purgeLocalStorage&&window.localStorage){window.localStorage.removeItem('ListFiles-urlParameters');window.localStorage.removeItem('ListFiles-displayParameters');}else if(window.localStorage){u=window.localStorage.getItem('ListFiles-urlParameters');d=window.localStorage.getItem('ListFiles-displayParameters');}if(u){urlParameters=JSON.parse(u);}else{urlParameters={ailimit:100,aiprop:'timestamp|user|url|size|mime'};}if(d){displayParameters=JSON.parse(d);}else{displayParameters={timestamp:'checked',user:'checked',mime:'checked',size:'checked',width:'checked',height:'checked',rawtextSeparator:'\t',sortingDirection:-1,sortingProperty:'name'};}}function initSavedFormState(){if(urlParameters.aidir){
$descending.attr('checked','checked');$ascending.removeAttr('checked');}else{$ascending.attr('checked','checked');$descending.removeAttr('checked');}$ailimit.children().removeAttr('selected');$ailimit.children(('[value="'+urlParameters.ailimit+'"]')).attr('selected','selected');$aifrom.val((urlParameters.aifrom||''));$aito.val((urlParameters.aito||''));$aiprefix.val((urlParameters.aiprefix||''));$aiminsize.val((urlParameters.aiminsize||''));$aimaxsize.val((urlParameters.aimaxsize||''));setURL();$('.d-checkbox').each(function(){var $this=$(this);var dparam=$this.attr('dparam');if(displayParameters[dparam]){$this.attr('checked','checked');}else{$this.removeAttr('checked');}});if(displayParameters.sortingDirection===-1){$('#d-ascending').attr('checked','checked');$('#d-descending').removeAttr('checked');}else{$('#d-descending').attr('checked','checked');$('#d-ascending').removeAttr('checked');}$('#d-sorting-property').children().removeAttr('selected');$('#d-sorting-property').children((
'[value="'+displayParameters.sortingDirection+'"]')).attr('selected','selected');}function initQueryEvents(){$('#settings-save').click(function(){window.localStorage.setItem('ListFiles-urlParameters',JSON.stringify(urlParameters));window.localStorage.setItem('ListFiles-displayParameters',JSON.stringify(displayParameters));});$('#settings-reset').click(function(){initURLandDisplayParams(true);initSavedFormState();rebuildResults();});$ascending.change(function(){$descending.attr('checked',false);delete urlParameters.aidir;setURL();});$descending.change(function(){$ascending.attr('checked',false);urlParameters.aidir="descending";setURL();});$aifrom.change(function(){var temp=$(this).val();if(temp.length>0){urlParameters.aifrom=window.encodeURIComponent(temp.replace(/ /g,'_'));}else{delete urlParameters.aifrom;}setURL();});$aito.change(function(){var temp=$(this).val();if(temp.length>0){urlParameters.aito=window.encodeURIComponent(temp.replace(/ /g,'_'));}else{delete urlParameters.aito;}
setURL();});$aiprefix.change(function(){var temp=$(this).val();if(temp.length>0){urlParameters.aiprefix=window.encodeURIComponent(temp.replace(/ /g,'_'));}else{delete urlParameters.aiprefix;}setURL();});$aiminsize.change(function(){var temp=window.parseInt($(this).val());if(window.isNaN(temp)||typeof temp!=="number"){delete urlParameters.aiminsize;}else{urlParameters.aiminsize=temp;}setURL();});$aimaxsize.change(function(){var temp=window.parseInt($(this).val());if(window.isNaN(temp)||typeof temp!=="number"){delete urlParameters.aimaxsize;}else{urlParameters.aimaxsize=temp;}setURL();});$ailimit.change(function(){var temp=window.parseInt($(this).val());if(window.isNaN(temp)||typeof temp!=="number"){delete urlParameters.ailimit;}else{urlParameters.ailimit=temp;}setURL();});$query.click(function(){$(this).attr('disabled','disabled');$.getJSON((url+'&format=json'),apiCall);});}function initDisplayEvents(){$('#d-ascending').change(function(){$('#d-descending').attr('checked',false);
displayParameters.sortingDirection=-1;rebuildResults();});$('#d-descending').change(function(){$('#d-ascending').attr('checked',false);displayParameters.sortingDirection=1;rebuildResults();});$('#d-sorting-property').change(function(){displayParameters.sortingProperty=$(this).children(':selected').attr('value');rebuildResults();});$('.d-checkbox').change(function(){var $this=$(this);var dparam=$this.attr('dparam');if($this.is(':checked')){displayParameters[dparam]='checked';if(dparam==='rawtext'){displayParameters.rawtextSeparator=window.prompt('When results are concatenated in raw text, they are separated by a certain string or character. Please choose your separator string. Note: the default separator is a single \'tab\' character.','\t');}}else{delete displayParameters[dparam];}rebuildResults();});}function getFile(element){if(element instanceof jQuery){element=element[0];}return decodeURIComponent(new mw.Uri(element.href).path).replace(pathRegex,'');}function initialize(){pathRegex
=new RegExp('^'+$.escapeRE(mw.config.get('wgArticlePath').replace('$1','')));if(mw.config.get('wgAction')!=='edit'){$(initListFilesForm);}var specialPage=mw.config.get('wgCanonicalSpecialPageName');if(specialPage==="Listfiles"){$(function(){var filenames="",count=0,$table=$('.listfiles'),$tr;$table.find('.TablePager_col_img_name').each(function(){filenames+=getFile($(this).children('a:first'))+"\n";count++;});$tr=$('<tr id="filenames-list-tr"><td colspan="6" style="text-align:center; padding:10px;">Here is a raw list of the '+count+' filename(s) currently shown on this page, provided by the <a title="w:c:dev:ListFiles" href="https://dev.wikia.com/wiki/ListFiles">ListFiles</a> script on the Fandom Developers Wiki.<br /><textarea id="filenames-list-textarea" style="width:95%; height:150px;"></textarea></td></tr>');$tr.find('#filenames-list-textarea').val(filenames);$('#filenames-list-tr').remove();$table.children('tbody').prepend($tr);});}else if(specialPage==="Unusedimages"||specialPage
==="UnusedVideos"||specialPage==="Uncategorizedimages"){$(function(){var filenames="",count=0,$container;$('.gallerytext > a').each(function(){filenames+=getFile(this)+"\n";count++;});$container=$('<div id="filesnames-list-container"><hr /><p>Here is a raw list of the '+count+' filename(s) currently shown on this page, provided by the <a title="w:c:dev:ListFiles" href="https://dev.wikia.com/wiki/ListFiles">ListFiles</a> script on the Fandom Developers Wiki.</p><textarea id="filesnames-list-textarea" style="width: 95%; height: 150px"></textarea></div>');$container.children('#filesnames-list-textarea').val(filenames);$('#filesnames-list-container').remove();$('.gallery').before($container);});}}mw.loader.using(['mediawiki.util'],function(){initialize();window.ajaxCallAgain=window.ajaxCallAgain||[];window.ajaxCallAgain.push(initialize);});}(jQuery,mediaWiki,window));;(function($,mwConfig){"use strict";if(mwConfig.wgAction==='formedit'){$('#mw-content-text').prepend(
'<div class=warningmessage>Do <strong>NOT</strong> add new manga information to the wiki until the entire chapter is available.</div>');}if(mwConfig.wgNamespaceNumber>0&&mwConfig.wgNamespaceNumber%2===1&&/\/[Aa]rchive[^\/]*$/.test(mwConfig.wgTitle)){$(function($){var $editLink;if(mwConfig.skin==='oasis'){$('li > a#ca-edit').parent().remove();$editLink=$('#WikiaPageHeader .wikia-menu-button > a');if(mwConfig.wgAction==='edit'){var $n=$('<li>This is an archive, it is <strong>NOT</strong> a talkpage. Please refrain from editing it without a good reason.</li>');$('#EditPageEditor .editpage-notices ul').empty().append($n);}}else{$('#ca-addsection').remove();$editLink=$('#ca-edit a');}$editLink.removeAttr('href').prop('title','This page is an archive and should not be edited.').text('Archive').css('color','#bbb');});}}(jQuery,mediaWiki.config.values));;window.dev=window.dev||{};dev.ReferencePopups=dev.ReferencePopups||{};dev.ReferencePopups.unload=dev.ReferencePopups.unload||function(){
"use strict";delete this.Popup;delete this.configure;if(this.unloadCore){this.unloadCore();}};(function(module,lang){"use strict";var i18n={en:{coreConfigureText:'Configure Reference Popups',coreConfigureHover:'Change settings for Reference Popups'},ar:{coreConfigureText:'اضبط تلميحات المراجع',coreConfigureHover:'اضبط إعدادات تلميح المراجع'},be:{coreConfigureText:'Налада усплываючых падказак',coreConfigureHover:'Змяніць налады усплываючых падказак'},ca:{coreConfigureText:'Configura referències emergents',coreConfigureHover:'Canviar la configuració de referències emergents'},de:{coreConfigureText:'Referenz-Popups konfigurieren',coreConfigureHover:'Einstellungsänderungen für Referenz-Popups'},es:{coreConfigureText:'Configurar popups de referencias',coreConfigureHover:'Modificar la configuración de los popups de referencias'},fr:{coreConfigureText:'Configurer Popups de Référence',
coreConfigureHover:'Modifier les préférences pour les Popups de Référence'},it:{coreConfigureText:'Configura le note a popup',coreConfigureHover:'Cambia le impostazioni per le note a popup'},ja:{coreConfigureText:'注釈ふきだしの設定',coreConfigureHover:'注釈ふきだしの設定を変更する'},ko:{coreConfigureText:'주석 말풍선 설정',coreConfigureHover:'주석 말풍선 설정하기'},nl:{coreConfigureText:'Configureer Referentie Popups',coreConfigureHover:'Wijzig de instellingen voor Referentie Popups'},pl:{coreConfigureText:'Skonfiguruj wyskakujące przypisy',coreConfigureHover:'Zmień ustawienia dla wyskakujących przypisów'},'pt-br':{coreConfigureText:'Configurar Popups de Referência',coreConfigureHover:'Mudar configurações para Popups de Referência'},ro:{coreConfigureText:'Configurați popupurile de referință',coreConfigureHover:'Schimbă setările pentru popupurile de referință'},ru:{coreConfigureText:
'Настройка всплывающих подсказок',coreConfigureHover:'Изменить настройки всплывающих подсказок'},tr:{coreConfigureText:'Referans Bildirimlerini Yapılandır',coreConfigureHover:'Referans Bildirimleri\'nin seçeneklerini değiştir'},uk:{coreConfigureText:'Налаштування спливаючих підказок',coreConfigureHover:'Змінити налаштування спливаючих підказок'},vi:{coreConfigureText:'Thiết Đặt Popup Tham Khảo',coreConfigureHover:'Thay đổi thiết đặt cho Popup Tham Khảo'},zh:{coreConfigureText:'设定参考资料弹窗',coreConfigureHover:'更改参考弹出窗口的设置'},'zh-hk':{coreConfigureText:'設定參考資料彈窗',coreConfigureHover:'更改參考彈出窗口的設置'},'zh-tw':{coreConfigureText:'設定參考資料彈窗',coreConfigureHover:'更改參考彈出窗口的設置'}};var msg=module.messages=module.messages||{};for(var m in i18n
.en){msg[m]=msg[m]||(i18n[lang]&&i18n[lang][m])||i18n.en[m];}})(dev.ReferencePopups,mediaWiki.config.get('wgUserLanguage'));(function(window,$,mw){"use strict";var module=window.dev.ReferencePopups;if(module.Popup){return $.noop;}var mwReady=$.Deferred(),mwDeps=['jquery.ui.position','jquery.effects.fold','jquery.ui.core','jquery.ui.widget'];mw.loader.load(mwDeps,null,true);mw.loader.using(mwDeps,mwReady.resolve,mwReady.reject);var colors=window.dev.colors||$.ajax({url:mw.config.get('wgLoadScript'),data:{mode:'articles',only:'scripts',articles:'u:dev:Colors/code.js'},dataType:'script',cache:!0});if(!module.cssLoaded){window.importArticle({type:'style',article:'u:dev:MediaWiki:ReferencePopups.css'});module.cssLoaded=!0;}var dfd=$.Deferred();module.Popup=dfd.promise();return function(callback){$.when(mwReady,colors).done(function(){dfd.resolve(module.Popup=callback(module,window,$,mw,window.dev.colors));}).fail(function(){delete module.Popup;dfd.reject();});};}(window,jQuery,mediaWiki
))(function(module,window,$,mw,Colors){"use strict";$.curCSS=$.curCSS||$.css;(function(color,Colors,mw,$){function ifOk(val,alt){return(val&&val!=='transparent'&&val!=='rgba(0, 0, 0, 0)')?val:alt;}function tryParse(val,alt){try{return Colors.parse(val);}catch(e){if(window.console){window.console.warn('Colors Parse Error ('+val+'): ',e,e.stack);}return Colors.parse(alt);}}function toRgba(color,alpha){return'rgba('+color.red()+','+color.green()+','+color.blue()+','+alpha+')';}if(mw.config.get('skin')==='oasis'){color.page=Colors.parse(Colors.wikia.page);color.pageBorder=Colors.parse(Colors.wikia.border);color.accent=Colors.parse(Colors.wikia.menu);color.popText=Colors.wikia.text;}else{var $content=$('#content');color.page=tryParse(ifOk($('#globalWrapper').css('backgroundColor'),$content.css('backgroundColor')),'white');color.pageBorder=tryParse(ifOk($content.css('borderLeftColor'),$content.css('borderRightColor')),'#AAA');color.accent=tryParse(ifOk($('#footer').css('borderTopColor'),$(
'body').css('backgroundColor')),'#fabd23');color.popText=tryParse($('#mw-content-text').css('color'),'black');}var mixCol;if(color.page.isBright()){color.back=color.page.mix(mixCol='black',95).mix('blue',97);}else{color.back=color.page.mix(mixCol='white',95);}color.popEdge=color.accent.mix(color.pageBorder,90);color.backA=toRgba(color.back,0.95);color.backB=toRgba(color.back.mix(mixCol,99),0.95);color.backC=toRgba(color.back.mix(mixCol,97),0.95);Colors.css(
'\
	.refpopups-box {\
		background-color: $back;\
		color: $popText;\
		border-color: $popEdge;\
		background: -webkit-linear-gradient(30deg, $backA, $backB 15%, $backB 25%, $backA 40%, $backA 50%, $backB 60%, $backB 70%, $backC 70%, $backC 90%, $backA 92%);\
		background: linear-gradient(60deg, $backA, $backB 15%, $backB 25%, $backA 40%, $backA 50%, $backB 60%, $backB 70%, $backC 70%, $backC 90%, $backA 92%);\
	}\
	.refpopups-chevron-in {\
		border-top-color: $back;\
		border-top-color: $backA;\
	}\
	.refpopups-flipped > .refpopups-chevron-in {\
		border-bottom-color: $back;\
		border-bottom-color: $backA;\
	}\
	.refpopups-chevron-out {\
		border-top-color: $popEdge;\
	}\
	.refpopups-flipped > .refpopups-chevron-out {\
		border-bottom-color: $popEdge;\
	}',color);})(module.colors=module.colors||{},Colors,mw,$);var widgetId=0;$.widget('Lunarity.referencePopup',{options:{activateBy:'hover',hoverDelay:200,content:'',disabled:!1,visible:!1,animation:'fold',animSpeed:300,context:null
,escapeCloses:!0,extraClass:'',contentBoxClass:'',stickyHover:!1,open:null,close:null},_create:function(){if(!this.document){this.document=$(this.element[0].ownerDocument);this.window=$(this.document[0].defaultView||this.document[0].parentWindow);this.eventNamespace='.'+this.widgetBaseClass+widgetId++;}this._timeouts={};this._$popup=$('<div class="refpopups-popup" id="'+this.eventNamespace.substr(1)+'">'+'<div class="refpopups-chevron-out"></div>'+'<div class="refpopups-chevron-in"></div>'+'<div class="refpopups-box">'+'</div></div>').addClass(this.options.extraClass).find('> .refpopups-box').addClass(this.options.contentBoxClass).end();this.options.context=$(this.document.find(this.options.context)[0]);if(!this.options.context.length){this.options.context=$(this.document[0].body);}this._setOption('activateBy',this.options.activateBy==='click'?'click':'hover');this._updateContent();if(!this.options.disabled){this.options.disabled=!0;this.enable();}if(this.options.visible){this.
options.visible=!1;this.show();}},_clearTimeout:function(name){if(this._timeouts[name]!==null){window.clearTimeout(this._timeouts[name]);this._timeouts[name]=null;}},_setTimeout:function(name,callback,delay){this._clearTimeout(name);var me=this;this._timeouts[name]=window.setTimeout(function(){me._timeouts[name]=null;callback.call(me);},delay||0);},_installEvents:function(){var self=this,map,ns=this.eventNamespace;this._$popup.off(ns);this.element.off(ns);this._clearTimeout('open');this._clearTimeout('close');if(this.options.disabled){return;}if(this.options.activateBy==='hover'){map={};map['mouseenter'+ns]=function(){self._clearTimeout('close');};map['mouseleave'+ns]=function(ev){self._setTimeout('close',function(){this.hide(ev);},self.options.hoverDelay);};this._$popup.on(map);map={};map['mouseenter'+ns]=function(ev){self._clearTimeout('close');self._setTimeout('open',function(){this.show(ev);},self.options.hoverDelay);};map['mouseleave'+ns]=function(ev){self._clearTimeout('open')
;if(!self.options.stickyHover){self._setTimeout('close',function(){this.hide(ev);},self.options.hoverDelay);}};this.element.on(map);}var lastTouch;map={};map['touchEnd'+ns]=function(ev){lastTouch=ev.originalEvent;};map['click'+ns]=function(ev){if((self.options.activateBy!=='click'&&(!lastTouch||lastTouch.defaultPrevented))||self.options.disabled){return;}lastTouch=null;if(!self.options.visible){ev.preventDefault();self.show(ev);}else{self.hide(ev);}};if(this.options.escapeCloses){var onKeyUp=function(ev){if(ev.which===$.ui.keyCode.ESCAPE){self.hide(ev);}};map['keyup'+ns]=onKeyUp;this._$popup.on('keyup'+ns,onKeyUp);}this.element.on(map);map=null;},triggerHover:function(event){if(this.options.activateBy==='hover'){this._setTimeout('open',function(){this.show(event);},this.options.hoverDelay);}},destroy:function(){this.hide();this._$popup.remove();this.element.off(this.eventNamespace);return $.Widget.prototype.destroy.call(this);},_updateContent:function(val){val=val||this.options.content
||'';if(!val.jquery&&!val.nodeType){this.options.content=val=$($(this.document[0].createElement('div')).html(val).contents().unwrap());}this._$popup.find('> .refpopups-box').empty().append(val);},_describeAria:function(yes){var k='aria-describedby',val=this.element.attr(k),s=val?val.split(/\s+/g):[],id=this._$popup[0].id,at=$.inArray(id,s);if(at!==-1){if(!yes){s.splice(at,1);}}else if(yes){s.push(id);}val=s.join(' ');this.element[val?'attr':'removeAttr'](k,val);},show:function(event){if(this.options.visible||this.options.disabled){return;}this.options.context.append(this._$popup.stop(true,true));this._positionPopup();this._describeAria(true);if(this.options.animation){this._$popup.hide().show(this.options.animation,this.options.animSpeed);}var triggered=0,self=this,ns=this.eventNamespace;this.window.on('scroll'+ns+' resize'+ns,function adaptCallback(){if(++triggered!==1){return;}self._positionPopup();window.setTimeout(function(){var t=triggered;triggered=0;if(t>1&&self.options.visible)
{adaptCallback();}},100);});if(this.options.activateBy==='click'){this.document.on('click'+ns,function(ev){if(!$(ev.target).closest(self._$popup.add(self.element)).length){self.hide();}});}this.options.visible=!0;this._trigger('open',event);},hide:function(event){if(!this.options.visible){return;}this.document.off(this.eventNamespace);this.window.off(this.eventNamespace);if(this.options.animation){var $clone=this._$popup.clone();this._$popup.after($clone);$clone.hide(this.options.animation,this.options.animSpeed,function(){$clone.remove();});}this._$popup.detach();this._describeAria(false);this.options.visible=!1;this._trigger('close',event);},toggle:function(yesno){yesno=(yesno!==void 0?yesno:!this.options.visible);this[yesno?'show':'hide']();},_setOption:function(key,val){switch(key){case'disabled':if(val&&this.options.visible){this.hide();}this.options.disabled=!!val;this._installEvents();return;case'visible':this[val?'show':'hide']();return;case'activateBy':if(({hover:1,click:
1})[val]===1){this.options.activateBy=val;this._installEvents();}return;case'content':this.options.content=val;this._updateContent();return;case'context':return;case'extraClass':this._$popup[0].className='refpopups-popup';this._$popup.addClass(val);break;case'extraBoxClass':this._$popup.find('> .refpopups-box').prop('className','refpopups-box').addClass(val);break;}return $.Widget.prototype._setOption.call(this,key,val);},_positionPopup:function(){var $popup=this._$popup.removeClass('refpopups-flipped'),$this=this.element,$chevOut=$popup.find('> .refpopups-chevron-out'),chevOutHeight=0;if($chevOut.is(':visible')){chevOutHeight=$chevOut.position().top+$chevOut.outerHeight()-$popup.outerHeight();}$popup.position({my:'bottom',at:'top',of:$this,collision:'fit none',offset:'0 -'+chevOutHeight});var spaceAtTop=$this.offset().top,spaceAtBottom=spaceAtTop+$this[0].offsetHeight,popupHeight=$popup[0].offsetHeight+chevOutHeight,scroll=this.window.scrollTop();spaceAtTop=spaceAtTop-scroll;
spaceAtBottom=(scroll+this.window.height())-spaceAtBottom;if(spaceAtTop<popupHeight&&spaceAtTop<spaceAtBottom){$popup.addClass('refpopups-flipped').position({my:'top',at:'bottom',of:$this,collision:'fit none',offset:'0 '+chevOutHeight});}if(!chevOutHeight){return;}var $chevIn=$popup.find('> .refpopups-chevron-in'),myLoc=$this.offset().left-$popup.offset().left+$this.outerWidth()/2;$chevOut.css('left',(myLoc-$chevOut.outerWidth()/2)+'px');$chevIn.css('left',(myLoc-$chevIn.outerWidth()/2)+'px');}});return $.Lunarity.referencePopup;});(function(window,$){"use strict";var module=window.dev.ReferencePopups;if(module.unloadCore){return $.noop;}module.unloadCore=$.noop;return function(callback){$.when(module.Popup).done(function(){callback(module,window,$,window.mediaWiki);}).fail(function(){delete module.unloadCore;});};}(window,jQuery))(function(module,window,$,mw){"use strict";var store={get:function(key){try{return JSON.parse(window.localStorage.getItem(key));}catch(e){return null;}},set:
function(key,data){try{window.localStorage.setItem(key,JSON.stringify(data));}catch(e){}}};var userConfig=(function(config,defaults){if(typeof(config)!=='object'||config===null){config={};}if(({hover:1,click:1})[config.react]!==1){config.react='hover';}config.hoverDelay=config.hoverDelay||defaults.hoverDelay||200;config.animate=(config.animate===void 0?defaults.animate===void 0||defaults.animate:!!config.animate);config.disabled=!!config.disabled&&!module.lockdown;config.stick=(config.stick===void 0?defaults.stick!==void 0&&defaults.stick:!!config.stick);return config;})(store.get('RefPopupsJS'),module.defaults||{});var armedPop=null,openPop=null;function cyclePopup(newTarget){if(openPop&&openPop.element.is(newTarget)){return;}if(armedPop){if(armedPop.element.is(newTarget)){return;}armedPop.destroy();}return(armedPop=constructPopup($(newTarget)));}function cleanupPopups(){if(openPop){openPop.destroy();}if(armedPop){armedPop.destroy();}openPop=armedPop=null;}$(function($){var lastTouch;
$('#mw-content-text').on({'touchEnd.RefPopups':function(ev){lastTouch=ev.originalEvent;},'click.RefPopups':function(ev){if(((!lastTouch||lastTouch.defaultPrevented)&&userConfig.react!=='click')||userConfig.disabled){return;}lastTouch=null;var pop=cyclePopup(this);if(pop){ev.preventDefault();pop.show(ev);}},'referencepopupopen.RefPopups':function(){if(!armedPop||!armedPop.element.is(this)){return;}var oldOpen=openPop;openPop=armedPop;armedPop=null;if(oldOpen){oldOpen.destroy();}},'referencepopupclose.RefPopups':function(){if(!openPop||!openPop.element.is(this)){return;}if(armedPop){openPop.destroy();}else{armedPop=openPop;}openPop=null;}},'.reference');$(window).on('pagehide.RefPopups',cleanupPopups);applyHoverEvents();});function applyHoverEvents(){var $article=$('#mw-content-text');$article.off('mouseenter.RefPopups');if(userConfig.disabled){return;}if(userConfig.react!=='hover'){if(openPop){openPop.option('activateBy','click');}if(armedPop){armedPop.option('activateBy','click');}
return;}$article.on('mouseenter.RefPopups','.reference',function(){var pop=cyclePopup(this);if(pop){pop.triggerHover();}});if(openPop){openPop.option('activateBy','hover');}if(armedPop){armedPop.option('activateBy','hover');}}if(!module.lockdown){$(function($){$('#articleCategories, #catlinks').first().after($('<a href="#configure-refpopups" class="refpopups-configure-page" />').html('['+module.messages.coreConfigureText+']').click(onClickConfigure).appendTo(this));});}module.unloadCore=function(){$('#mw-content-text').off('.RefPopups');$(window).off('.RefPopups');$('a[href="#configure-refpopups"]').remove();cleanupPopups();delete this.unloadCore;};$(window).trigger('dev-ReferencePopups-config',module.settings=$.extend({},userConfig));var configureIsPending=!1;function onClickConfigure(ev){ev.preventDefault();var closeFunc=function(){configureIsPending=!1;},interfaceFunc=function(confFunc){confFunc(userConfig,function(newSettings){store.set('RefPopupsJS',newSettings);
cleanupPopups();applyHoverEvents();$(window).trigger('dev-ReferencePopups-config',module.settings=$.extend({},newSettings));},closeFunc);};if(configureIsPending){return;}configureIsPending=!0;if(module.configure){$.when(module.configure).done(interfaceFunc).fail(closeFunc);return;}$.ajax({url:mw.config.get('wgLoadScript'),data:{mode:'articles',only:'scripts',articles:'w:dev:ReferencePopups/code.configure.js'},dataType:'script',cache:!0}).then(function(){$.when(module.configure).done(interfaceFunc).fail(closeFunc);}).fail(closeFunc);}function constructPopup($ref){var frag=$ref.find('a[href^="#cite_note"]').first();if(!frag.length){return null;}var $cite=$(frag.attr('href').replace(/\./g,'\\.'));if(!$cite.length){return null;}var $content=$('<div style="overflow:auto">'),$conf=$('<a href="#" class="refpopups-configure" />').prop('title',module.messages.coreConfigureHover).click(onClickConfigure);$content.append($cite.find('.reference-text').clone());return new module.Popup({content:
$conf.add($content),activateBy:userConfig.react,hoverDelay:userConfig.hoverDelay,animation:userConfig.animate&&'fold',stickyHover:userConfig.stick,contentBoxClass:'WikiaArticle'},$ref[0]);}});;;mw.loader.state({"wikia.fake.articles.9627a57ce6c4e36da0db5bd126d8b1c7":"ready"});

/* cache key: naruto:resourceloader:filter:minify-js:7:3d0559fafa55e77ca9045da78182c003 */