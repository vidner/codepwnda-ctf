diff --git quickjs.c quickjs.c
index 9606455..c81b450 100644
--- quickjs.c
+++ quickjs.c
@@ -47166,16 +47166,15 @@ static JSValue js_dataview_getValue(JSContext *ctx,
 {
     JSTypedArray *ta;
     JSArrayBuffer *abuf;
-    int is_swap, size;
+    int is_swap;
     uint8_t *ptr;
     uint32_t v;
-    uint64_t pos;
+    int64_t pos;
 
     ta = JS_GetOpaque2(ctx, this_obj, JS_CLASS_DATAVIEW);
     if (!ta)
         return JS_EXCEPTION;
-    size = 1 << typed_array_size_log2(class_id);
-    if (JS_ToIndex(ctx, &pos, argv[0]))
+    if (JS_ToInt64Sat(ctx, &pos, argv[0]))
         return JS_EXCEPTION;
     is_swap = FALSE;
     if (argc > 1)
@@ -47186,8 +47185,6 @@ static JSValue js_dataview_getValue(JSContext *ctx,
     abuf = ta->buffer->u.array_buffer;
     if (abuf->detached)
         return JS_ThrowTypeErrorDetachedArrayBuffer(ctx);
-    if ((pos + size) > ta->length)
-        return JS_ThrowRangeError(ctx, "out of bound");
     ptr = abuf->data + ta->offset + pos;
 
     switch(class_id) {
@@ -47269,18 +47266,17 @@ static JSValue js_dataview_setValue(JSContext *ctx,
 {
     JSTypedArray *ta;
     JSArrayBuffer *abuf;
-    int is_swap, size;
+    int is_swap;
     uint8_t *ptr;
     uint64_t v64;
     uint32_t v;
-    uint64_t pos;
+    int64_t pos;
     JSValueConst val;
 
     ta = JS_GetOpaque2(ctx, this_obj, JS_CLASS_DATAVIEW);
     if (!ta)
         return JS_EXCEPTION;
-    size = 1 << typed_array_size_log2(class_id);
-    if (JS_ToIndex(ctx, &pos, argv[0]))
+    if (JS_ToInt64Sat(ctx, &pos, argv[0]))
         return JS_EXCEPTION;
     val = argv[1];
     v = 0; /* avoid warning */
@@ -47321,8 +47317,6 @@ static JSValue js_dataview_setValue(JSContext *ctx,
     abuf = ta->buffer->u.array_buffer;
     if (abuf->detached)
         return JS_ThrowTypeErrorDetachedArrayBuffer(ctx);
-    if ((pos + size) > ta->length)
-        return JS_ThrowRangeError(ctx, "out of bound");
     ptr = abuf->data + ta->offset + pos;
 
     switch(class_id) {
